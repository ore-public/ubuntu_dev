- name: system
  hosts: all
  become: yes
  tasks:
    - name: aptitude
      apt:
        name:
          - aptitude
    - name: apt update
      apt:
        update_cache: yes
    - name: apt upgrade
      apt:
        upgrade: yes
    - name: build-essential install
      apt:
        name:
          - build-essential
          - vim
    - name: set vim default editor
      command: update-alternatives --set editor /usr/bin/vim.basic
    - name: config copy
      copy: src=../files/dotbash_profile dest=/home/vagrant/.bash_profile owner=vagrant group=vagrant mode="u=rw,g=r,o=r"
    - name: config copy
      copy: src=../files/resolved.conf dest=/etc/systemd/resolved.conf owner=root group=root mode="u=rw,g=r,o=r"
    - name: systemd-resolved restart
      service:
        name: systemd-resolved
        state: restarted    
    - name: sysctl
      sysctl:
        name: fs.inotify.max_user_watches
        value: 524288